#!/bin/sh

current_branch=$(git rev-parse --abbrev-ref HEAD)

valid_branch_regex="^(feature|bugfix|refactor|hotfix|fix)\/([a-z0-9-]+)$"

if [[ "$current_branch" != "main" && "$current_branch" != "master" && "$current_branch" != "dev" ]]; then
  if ! [[ "$current_branch" =~ $valid_branch_regex ]]; then
    echo "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –≤–µ—Ç–∫–∏ '$current_branch'."
    echo "üëâ –ò–º—è –≤–µ—Ç–∫–∏ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–¥–Ω–æ–º—É –∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:"
    echo "   - feature/some-feature"
    echo "   - bugfix/some-bug-fix"
    echo "   - refactor/some-refactor"
    echo "   - hotfix/some-hotfix"
    echo "   - fix/some-fix"
    exit 1 
  fi
fi

exit 0